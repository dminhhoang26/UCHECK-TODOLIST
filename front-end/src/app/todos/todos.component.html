<section class="heading-section">
  <h1 class="title is-1 has-text-centered">Todos</h1>
</section>

<div class="container add-todo-box-container">
  <div class="add-todo-box">

    <form #form="ngForm" (ngSubmit)="onFormSubmit(form)">
      <h2 class="title is-5">New Todo</h2>

      <div class="field is-grouped" style="margin: 0">
        <p class="control is-expanded">
          <input ngModel #todoTextField="ngModel" required minlength="2" name="text" class="input" type="text"
            placeholder="Type todo text here ...">
        </p>
        <p class="control">
          <button type="submit" class="button alt-gradient-button">
            <i class="material-icons">add</i>
            Add
          </button>
        </p>
      </div>

      <div *ngIf="todoTextField.invalid && showValidationErrors">
        <p class="help is-danger" *ngIf="todoTextField.errors.required">Please enter the text of your todo</p>
        <p class="help is-danger" *ngIf="todoTextField.errors.minlength">Todo text must be at least 2 characters</p>
      </div>

    </form>
    <div class="mt-3" style="text-align: center;">
      <div class="control text-center">
        <input [ngModel]="currentDate" id="selectedDate" type="date" style="width: 180px;" class="input"
          #todoSelectedField="ngModel" name="selectedDate" (change)="currentDateChanged($event)">
      </div>
    </div>
  </div>
</div>

<section *ngIf="todos?.length > 0" class="section">
  <div class="container">
    <!-- <div class="todos-list"> -->
    <table class="table-bordered" style="width: 100%;">
      <colgroup>
        <col style="width: 100px;">
        <col style="width: 100px;">
        <col style="width: 260px;">
        <col style="width: 100px;">
        <col style="width: auto;">
      </colgroup>
      <thead>
        <tr>
          <th scope="col" class="cell-content">
            <div><i class="material-icons me-1">date_range</i>Start time</div>
          </th>
          <th scope="col" class="cell-content">
            <span><i class="material-icons me-1">date_range</i>End time</span>
          </th>
          <th scope="col" class="cell-content">
            <span><i class="material-icons me-1">all_inclusive</i>Power tasks</span>
          </th>
          <th scope="col" class="cell-content">
            <span>Complete</span>
          </th>
          <th scope="col" class="cell-content">
            <span>Remarks</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let todo of todos">
          <tr>
            <td class="cell-content">
              <span class="mt-2 ms-1 me-1 mb-2">{{todo.startTime}}</span>
            </td>
            <td class="cell-content">
              <span class="mt-2 ms-1 me-1 mb-2">{{todo.endTime}}</span>
            </td>
            <td class="cell-content task-text-field" style="cursor: pointer;" (click)="onEditClicked(todo)">
              <span class="mt-2 ms-1 me-1 mb-2">{{todo.text}}</span>
              <i class="material-icons">edit</i>
            </td>
            <td class="cell-content">
              <span class="mt-2 ms-1 me-1 mb-2">{{todo.complete}}</span>
            </td>
            <td class="cell-content">
              <span class="mt-2 ms-1 me-1 mb-2">{{todo.remarks}}</span>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</section>
